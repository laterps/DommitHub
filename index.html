<!DOCTYPE html>
<html>
<head>
  <title>Control de Caja</title>
</head>
<body>
 <button id="relay1-toggle">Encender Relay 100</button>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const button = document.getElementById('relay1-toggle');
  let isOn = false;  // Estado inicial: apagado

  button.addEventListener('click', () => {
    const command = isOn ? '0' : '1';
    button.textContent = 'Enviando...';

    fetch('https://api.github.com/repos/laterps/dommithub/actions/workflows/Dommithub.yml/dispatches', {
      method: 'POST',
      headers: {
        'Accept': 'application/vnd.github.v3+json',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer REEMPLAZA_AQUÍ_TU_DOMMITHUB_TOKEN'
      },
      body: JSON.stringify({
        ref: 'main',
        inputs: { command }
      })
    })
    .then(response => {
      if (response.ok) {
        // Alterna el estado y el texto del botón
        isOn = !isOn;
        button.textContent = isOn
          ? 'Apagar Relay 1'
          : 'Encender Relay 1';
      } else {
        button.textContent = 'Error al enviar';
      }
    })
    .catch(() => {
      button.textContent = 'Error al enviar';
    });
  });
});
</script>
</body>
</html>
